<!DOCTYPE>
<html>
    <body>
        <style type="text/css">
            img {
                max-width: 500px;
            }
        </style>
        <h1> Cat Clicker</h1>
        <div class="cat_list">
        </div>
        <div class="cat_display">
        </div>
        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
        <script type="text/javascript">
            $(function() { 
                //reference: https://github.com/udacity/ud989-pizzamvo/blob/master/js/app.js
                
                //setting up variables
                var container = $('.cat_container');
                var catDisplay = $('.cat_display');
                var parent = null;
                var counter_value = null;
                var names = [];
                var position = null;


                //model
                var model = {
                    catList: ["banjo", "chewie", "beta", "maru", "joey"],
                    catClickCount: []
                };

                var controller = {
                    //update counter data in the model based on clicks in the view
                    //get counter data for the view
                    getVisibleCat: function() {
                        var visibleCats = model.catList.filter(function(cat) {
                            console.log('something here');
                        })
                    },
                    postCat: function(thisCatIndex, thisCatName) {
                        console.log(thisCatIndex + thisCatName);
                        // var thisCat = $(f.target).attr('name');
                        // position = ($(f.target).index());
                        var clickedCat = model.catList[thisCatIndex];
                        clickedCat.visible = true;
                        viewCats.render();
                        // catDisplay.append('<div class="cat_container"><h2>' + thisCat + '</h2><img src="assets/images/' + thisCat + '.jpg" class="cat_image" name="' + thisCat+ '"/><div class="counter"><p>' + catClickCount[position] + '</p></div></div>')

                    },
                    init: function() {
                        viewList.init();
                        viewCats.init();
                    }
                };  

                var viewList = {
                    //render view
                    //click functions

                    init: function() {
                        for (var i = 0; i < model.catList.length; i++) {
                            var cat = model.catList[i]

                            $('.cat_list').append('<a href="#stuff" name="' + cat+ '"" target=#' + cat + '>' + cat + '</a> ');

                            model.catClickCount.push(0);
                        };
                    },
                };

                var viewCats = {
                    init: function(){
                        $(document.body).on('click', '.cat_list a', function(f){
                            f.preventDefault();
                            var thisCatIndex = $(f.target).index();
                            var thisCatName = $(f.target).attr('name');
                            $('.cat_container').remove();
                            controller.postCat(thisCatIndex, thisCatName);
                        });
                    },
                    render: function(cat) {
                        console.log('rendering');
                        controller.getVisibleCat(cat);
                    }
                };

                controller.init();


                // function postCat(f) {
                //     $('.cat_container').remove();
                //     var thisCat = $(f.target).attr('name');
                //     position = ($(f.target).index());
                //     catDisplay.append('<div class="cat_container"><h2>' + thisCat + '</h2><img src="assets/images/' + thisCat + '.jpg" class="cat_image" name="' + thisCat+ '"/><div class="counter"><p>' + catClickCount[position] + '</p></div></div>')

                // };



                //function to get current value
                function getValue(e) {
                    console.log('go');
                    parent = $(e.target).parent();
                    var value = parent.find('p').html();
                    counter_value = value;
                    //increase counter value
                    counter_value++

                    updateCounter(e);
                };

                //function to update the counter for each cat
                function updateCounter(e) {
                    counter_value = $('.cat_container p').html();
                    counter_value++
                    $('.cat_container p').html(counter_value);
                    catClickCount[position] = counter_value;
                };


                //events
                //click the name and bring up the cat template
                // $(document.body).on('click', '.cat_list a', function(f){
                //     f.preventDefault();
                //     postCat(f);
                // });

                //click the cat and increase the value
                $(document.body).on('click', '.cat_image', function(e){
                    updateCounter(e);
                });
            });
        </script>
    </body>
</html>